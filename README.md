# Vulnerability Heatmap

[![Default Pipeline](https://github.com/secureIO-GmbH/VulnerabilityHeatmap/actions/workflows/node.js.yml/badge.svg)](https://github.com/secureIO-GmbH/VulnerabilityHeatmap/actions/workflows/node.js.yml) [![Container Image Scan](https://github.com/secureIO-GmbH/VulnerabilityHeatmap/actions/workflows/trivy.yml/badge.svg)](https://github.com/secureIO-GmbH/VulnerabilityHeatmap/actions/workflows/trivy.yml) [![CodeQL](https://github.com/secureIO-GmbH/VulnerabilityHeatmap/actions/workflows/github-code-scanning/codeql/badge.svg)](https://github.com/secureIO-GmbH/VulnerabilityHeatmap/actions/workflows/github-code-scanning/codeql)

Visualizes security vulnerabilities across multiple projects in heatmap representation.
The orchestration and tracking has become quite complex, especially for central security teams in large enterprises dealing with a multitude of distributed teams. The heatmap is built for the ease of adaption by technology management and development roles to identify the critical outliers within the organization. The different views of the heatmap allow tailored representation of configurable criteria over time and across projects.
The Vulnerability Heatmap is particular helpful for Security Awareness and Security Champions programs by giving an easy consumable representations of the enterprise's flaws. Best-practice guidance for incorporation in your Awareness program will be referenced in the future.

## Demo

See here: [https://secureio-gmbh.github.io/VulnerabilityHeatmap/](https://secureio-gmbh.github.io/VulnerabilityHeatmap/)

## Development

Create a file called `backend/config.js` with the following content:

```
echo "
export const THREADFIX_APIKEY  = '$THREADFIX_APIKEY';
export const THREADFIX_BASEURL = '$THREADFIX_BASEURL';
export const KIUWAN_API_KEY    = "$KIUWAN_API_KEY";
" > backend/config.js
```

Get the values of `$THREADFIX_APIKEY` and `$THREADFIX_BASEURL` from your running Threadfix installation.

Then start the node.js server and serve the index.html file:

```
# Start the node.js server on port 9876
$ npm install
$ npm run watchBackend
$ open http://localhost:9876/
```

## Install via Docker

```
$ docker build -t heatmap .
$ docker run -p 9877:9877 -d heatmap

# get a shell inside
$ docker run -it --entrypoint /bin/sh heatmap

# run on the server directly
PORT=9877 NODE_ENV=production node backend/server.js
```

## Deploy to GitHub pages

```
npm run deploy
```

## Architecture

A simple node.js service will fetch the data for all applications via adaptors to a variety of vulnerability management tools and vulnerability scan tools. It implements a simple JSON file based caching logic. When a browser fetches the html, a GET request is sent to the node.js service to get the JSON data. A little bit of JavaScript will then prepare the data for rendering the heatmap using the "apexcharts" library.

![Simple architecture](./arch.png)
